/*
 * =========================================
 * Color Palette (Unchanged)
 * =========================================
 */

.bg-blue-500 {
  background-color: #3b82f6;
}
.bg-green-500 {
  background-color: #22c55e;
}
.bg-yellow-600 {
  background-color: #ca8a04;
}
.bg-cyan-500 {
  background-color: #06b6d4;
}
.bg-red-500 {
  background-color: #ef4444;
}
.bg-purple-500 {
  background-color: #a855f7;
}
.bg-lime-500 {
  background-color: #84cc16;
}
.bg-emerald-500 {
  background-color: #10b981;
}
.bg-orange-500 {
  background-color: #f97316;
}
.bg-rose-500 {
  background-color: #f43f5e;
}
.bg-amber-700 {
  background-color: #b45309;
}
.bg-teal-500 {
  background-color: #14b8a6;
}
.bg-red-700 {
  background-color: #b91c1c;
}
.bg-gray-400 {
  background-color: #9ca3af;
}
.bg-indigo-500 {
  background-color: #6366f1;
}
.bg-yellow-400 {
  background-color: #facc15;
}
.bg-brown-500 {
  background-color: #92400e;
}
.bg-pink-500 {
  background-color: #ec4899;
}
.bg-fuchsia-500 {
  background-color: #d946ef;
}
.bg-sky-500 {
  background-color: #0ea5e9;
}
.bg-red-400 {
  background-color: #f87171;
}
.bg-green-600 {
  background-color: #16a34a;
}
.bg-orange-600 {
  background-color: #ea580c;
}
.bg-indigo-700 {
  background-color: #4f46e5;
}
.bg-gray-200 {
  background-color: #e5e7eb;
}

/*
 * =========================================
 * Main Layout Overrides
 * (Forces the layout from image_865824.jpg)
 * =========================================
 */

.cue-editor-main {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  background-color: var(--color-secondary-background);
  border-top: 1px solid var(--color-muted);
  border-left: 1px solid var(--color-muted);
  /* OVERRIDE: Prevents the entire editor from overflowing */
  overflow: hidden !important;
}

.top-container {
  display: flex;
  /* OVERRIDE: Makes this container fill all available vertical space */
  height: 64%;
  /* OVERRIDE: Prevents children (waterfall/video) from overflowing */
  overflow: hidden !important;
}

.video-workflow {
  display: flex;
  align-items: center;
  justify-content: center;
  object-fit: contain;
  /* MODIFIED: Make it fill remaining horizontal space */
  flex: 1;
  min-width: 0; /* Fix for flex shrinking */
  height: 89% !important; /* OVERRIDE: Fill parent */
  overflow: hidden !important; /* OVERRIDE: Clip video */
}

/*
 * =========================================
 * Cue Timeline (Bottom Bar) Overrides
 * (Forces horizontal scroll, prevents vertical stacking)
 * =========================================
 */

.cue-timeline-container {
  display: flex;
  align-self: baseline;
  width: 100%;
  flex-direction: column;
  justify-content: space-between;
  user-select: none;
  /* OVERRIDE: Force a fixed, non-growing height */
  flex-shrink: 0 !important;
  height: 230px !important; /* Adjust if needed, but this is a stable height */
  /* OVERRIDE: Prevents internal timeline content from overflowing vertically */
  overflow: hidden !important;
}

.cue-timeline-content {
  flex: 1;
  position: relative;
  /* OVERRIDE: Enforce horizontal scroll and NO vertical scroll */
  overflow-x: auto !important;
  overflow-y: hidden !important;
}

.cue-timeline-toolbar {
  /* This is duplicated in your CSS, but we'll ensure it's correct */
  display: flex;
  padding: 10px;
  align-items: center;
  justify-content: space-between;
  border-top: 1px solid var(--color-muted);
  border-bottom: 1px solid var(--color-muted);
  background-color: var(--color-background);
  flex-shrink: 0; /* Prevents toolbar from shrinking */
}

.cue-timeline-inner {
  position: relative;
  height: 100%;
  background-color: var(--color-background);
}

.cue-timeline-markers {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 1.5rem;
  display: flex;
  background-color: var(--color-secondary-background);
}

.cue-timecode {
  font-weight: 800;
}

.cue-timeline-marker {
  position: absolute;
  top: 0;
  height: 100%;
}

.cue-timeline-marker-line {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 1px;
  height: 0.5rem;
  background-color: var(--color-muted);
}

.cue-timeline-marker-label {
  position: absolute;
  top: 0;
  left: -50%;
  transform: translateX(-50%);
  font-size: 10px;
  color: var(--color-muted);
  font-weight: 700;
}

.cue-timeline-cues {
  position: absolute;
  top: 30px;
  bottom: 0;
  left: 0;
  width: 100%;
  /* OVERRIDE: This is critical. It clips any cues that try to stack. */
  overflow-y: hidden !important;
}

.cue-box-label {
  width: 24px;
  height: 24px;
  text-align: center;
  border: 3px solid var(--color-foreground);
  fill: var(--color-background);
  paint-order: stroke fill;
  font-size: 11pt;
  font-weight: 800;
  border-radius: 5px;
  /* ADDED: Prevents the box from shrinking */
  flex-shrink: 0;
}

.cue-timeline-playhead {
  position: absolute;
  top: 0;
  bottom: 0;
  background-color: var(--color-accent);
  pointer-events: none;
  z-index: 20;
  width: 1px;
}

.cue-timeline-cue {
  /* OVERRIDE: Force all cues to the *same* top position. */
  position: absolute !important;
  top: 1px !important;

  height: 40px;
  display: flex;
  align-items: center;
  padding-left: 0.5rem;
  padding-right: 0.5rem;

  /* OVERRIDE: This prevents text from wrapping and breaking the layout */
  overflow: hidden !important;
  white-space: nowrap !important;
}

/* * ADDED: This class was used in CueTimeline.tsx but missing from the CSS.
 * It is ESSENTIAL for truncating the "New Cue" text.
 */
.cue-timeline-cue-label {
  flex-shrink: 1; /* Allows label to shrink */
  min-width: 0; /* Fix for flex shrinking */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/*
 * =========================================
 * Video Player (Unchanged)
 * =========================================
 */

.video-player {
  width: 100%;
  height: 100%;
  background-color: #000;
  position: relative;
}

.video-element {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

/*
 * =========================================
 * Waterfall / EditView (Top-Left Panel)
 * (Ensures correct vertical scroll)
 * =========================================
 */

.waterfall-container {
  display: flex;
  flex-direction: column;
  /* OVERRIDE: Fill parent's height */
  height: 100% !important;
  /* MODIFIED: Set a fixed width */
  width: 48%; /* Adjust as needed */
  flex-shrink: 0; /* Prevents shrinking */
  /* OVERRIDE: Clip all internal content */
  overflow: hidden !important;
}

.cue-list-scroll-area {
  flex: 1;
  /* This is the INTENDED vertical scroll area */
  overflow-y: auto;
  overflow-x: hidden;
  position: relative;
  background-color: var(--color-background);
  /* Fix for flex overflow */
  max-height: 280px;
}

.cue-row-base {
  display: flex;
  align-items: center;
  height: 3rem;
  cursor: pointer;
  transition-property: background-color;
  transition-duration: 150ms;
}

.cue-row-base:hover {
  background-color: var(--color-secondary-background);
}

.cue-row-base.active-cue .waterfall-viz {
  background-color: var(--color-secondary-background);
}

.cue-row-selected {
  background-color: var(--color-secondary-background);
}

.active-cue {
  background-color: var(--color-secondary-background);
}

.cue-index {
  width: 2.5rem;
  text-align: center;
  font-family: monospace;
  font-size: 0.875rem;
  color: #a0aec0;
  flex-shrink: 0; /* ADDED */
}

.active-cue .cue-index {
  color: #fff;
  font-weight: 700;
}

.camera-badge-wrapper {
  width: 4rem;
  display: flex;
  justify-content: center;
  flex-shrink: 0; /* ADDED */
}

.camera-badge {
  width: 2.5rem;
  height: 2rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 0.25rem;
  font-weight: 700;
  font-size: 1.125rem;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}

.camera-badge-white-text {
  color: #000;
}

.camera-badge-black-text {
  color: #fff;
}

.cue-duration {
  text-align: right;
  padding-right: 0.5rem;
  font-family: monospace;
  color: #cbd5e0;
  font-size: 12pt;
  flex-shrink: 0; /* ADDED */
}

.cue-description {
  flex: 1;
  padding-left: 0.5rem;
  padding-right: 0.5rem;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  font-size: 13pt;
  color: #cbd5e0;
  min-width: 0; /* ADDED */
}

.active-cue .cue-description {
  color: #fff;
  font-weight: 800;
}

.waterfall-viz {
  width: 100%;
  height: 100%;
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
  background-color: var(--color-background);
  flex-shrink: 0; /* ADDED */
}

.waterfall-cue-lister {
  display: flex;
  z-index: 20;
}

.cue-bar {
  position: absolute;
  top: 0.5rem;
  bottom: 0.5rem;
  border-radius: 0.125rem;
  opacity: 0.9;
}

.cue-bar-text {
  padding-left: 0.5rem;
  padding-right: 0.5rem;
  font-size: 0.75rem;
  font-weight: 700;
  color: rgba(0, 0, 0, 0.5);
  padding-top: 0.25rem;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.scroll-spacer {
  height: 20vh;
}

.editor-footer {
  padding: 0.5rem;
  border-top: 1px solid #4a5568;
  background-color: #333;
  flex-shrink: 0;
  /* MODIFIED: Give it a non-growing height */
  height: 8rem;
}

.footer-actions {
  display: flex;
  gap: 0.5rem;
  align-items: center;
  margin-bottom: 0.5rem;
}

.add-cue-button {
  background-color: #48bb78;
  color: #fff;
  padding-left: 0.75rem;
  padding-right: 0.75rem;
  padding-top: 0.25rem;
  padding-bottom: 0.25rem;
  font-size: 0.875rem;
  border-radius: 0.25rem;
  border: none;
  cursor: pointer;
  transition-property: background-color;
  transition-duration: 150ms;
}

.add-cue-button:hover {
  background-color: #38a169;
}

.delete-cue-button {
  background-color: #e53e3e;
  color: #fff;
  padding: 0.5rem;
  font-size: 0.875rem;
  border-radius: 0.25rem;
  border: none;
  cursor: pointer;
  transition-property: background-color;
  transition-duration: 150ms;
}

.delete-cue-button:hover {
  background-color: #c53030;
}

.settings-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 1rem;
  font-size: 0.875rem;
}

.settings-group {
  /* No specific styles needed */
}

.settings-label {
  display: block;
  font-size: 0.75rem;
  color: #cbd5e0;
  margin-bottom: 0.25rem;
}

.settings-input {
  width: 100%;
  background-color: #4a5568;
  border: 1px solid #4a5568;
  border-radius: 0.25rem;
  padding-left: 0.5rem;
  padding-right: 0.5rem;
  padding-top: 0.25rem;
  padding-bottom: 0.25rem;
  color: #fff;
  outline: none;
}

.settings-input:focus {
  border-color: #4299e1;
}

.settings-fields {
  display: flex;
  align-items: flex-end;
  gap: 0.5rem;
}

.camera-settings-button {
  flex: 1;
  background-color: #4a5568;
  color: #fff;
  padding-left: 0.75rem;
  padding-right: 0.75rem;
  padding-top: 0.25rem;
  padding-bottom: 0.25rem;
  border-radius: 0.25rem;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  border: 1px solid #a0aec0;
  cursor: pointer;
  transition-property: background-color;
  transition-duration: 150ms;
}

.camera-settings-button:hover {
  background-color: #718096;
}

.color-select {
  background-color: #4a5568;
  border: 1px solid #4a5568;
  border-radius: 0.25rem;
  padding-left: 0.5rem;
  padding-right: 0.5rem;
  padding-top: 0.25rem;
  padding-bottom: 0.25rem;
  color: #fff;
  width: 6rem;
  height: 30px;
}

.select-cue-message {
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #a0aec0;
  font-size: 0.875rem;
  font-style: italic;
}
